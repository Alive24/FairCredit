/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  addDecoderSizePrefix,
  addEncoderSizePrefix,
  combineCodec,
  getArrayDecoder,
  getArrayEncoder,
  getI64Decoder,
  getI64Encoder,
  getOptionDecoder,
  getOptionEncoder,
  getStructDecoder,
  getStructEncoder,
  getU32Decoder,
  getU32Encoder,
  getUtf8Decoder,
  getUtf8Encoder,
  type Codec,
  type Decoder,
  type Encoder,
  type Option,
  type OptionOrNullable,
} from "@solana/kit";

/**
 * Credential metadata structure
 * Contains detailed credential information, with some data stored on IPFS
 */
export type CredentialMetadata = {
  /** Credential title */
  title: string;
  /** Detailed description */
  description: string;
  /** List of acquired skills */
  skillsAcquired: Array<string>;
  /** Research output (optional) */
  researchOutput: Option<string>;
  /** Mentor endorsement content */
  mentorEndorsement: string;
  /** Completion date timestamp */
  completionDate: bigint;
  /** IPFS hash for storing additional metadata */
  ipfsHash: string;
};

export type CredentialMetadataArgs = {
  /** Credential title */
  title: string;
  /** Detailed description */
  description: string;
  /** List of acquired skills */
  skillsAcquired: Array<string>;
  /** Research output (optional) */
  researchOutput: OptionOrNullable<string>;
  /** Mentor endorsement content */
  mentorEndorsement: string;
  /** Completion date timestamp */
  completionDate: number | bigint;
  /** IPFS hash for storing additional metadata */
  ipfsHash: string;
};

export function getCredentialMetadataEncoder(): Encoder<CredentialMetadataArgs> {
  return getStructEncoder([
    ["title", addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder())],
    ["description", addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder())],
    [
      "skillsAcquired",
      getArrayEncoder(addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder())),
    ],
    [
      "researchOutput",
      getOptionEncoder(addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder())),
    ],
    [
      "mentorEndorsement",
      addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder()),
    ],
    ["completionDate", getI64Encoder()],
    ["ipfsHash", addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder())],
  ]);
}

export function getCredentialMetadataDecoder(): Decoder<CredentialMetadata> {
  return getStructDecoder([
    ["title", addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder())],
    ["description", addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder())],
    [
      "skillsAcquired",
      getArrayDecoder(addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder())),
    ],
    [
      "researchOutput",
      getOptionDecoder(addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder())),
    ],
    [
      "mentorEndorsement",
      addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder()),
    ],
    ["completionDate", getI64Decoder()],
    ["ipfsHash", addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder())],
  ]);
}

export function getCredentialMetadataCodec(): Codec<
  CredentialMetadataArgs,
  CredentialMetadata
> {
  return combineCodec(
    getCredentialMetadataEncoder(),
    getCredentialMetadataDecoder(),
  );
}
